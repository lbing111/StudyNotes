## 1. 基本的并发概念
1.1 并发与并行

并发：
* 在单个处理器上采用单核处理多个任务
* 在系统上同时运行多个任务（不同任务）
* 解释程序员将任务和对它们的共享资源的访问同步的不同技术和机制的方法

并行：
* 同一时间在不同的计算机上、处理器或处理核心上同时运行多个任务
* 同时在某个数据集的不同部分上运行同一任务的不同实例
* 系统中同时运行的多个任务

同步
协调2个或更多任务以获取预期结果的机制
* 控制同步：第二个任务不能在第一个任务完成之前执行
* 数据访问同步：多个任务访问共享变量时，在任意时间上只用一个任务能够访问共享数据

临界区：访问共享资源的一段代码，任意时间只能被一个任务执行，**互斥机制**。

同步机制：
* 信号量
* 监视器

共享内存和消息传递

1.2 并发应用程序中可能出现的问题
数据竞争：2个以上任务对同一个共享变量进行写入操作，没有任何同步机制
死锁：当2个或多个任务正在等待必须由另一个线程T1释放的共享资源，而线程T1又在等待前面的2个线程释放的共享资源时，该应用就出现了**死锁**。

**Coffman条件**
* 互斥，死锁中涉及的资源必须是不可共享的，一次只有一个线程使用该资源
* 占有并等待条件，一个线程占有某一共享资源时又请求另一互斥共享资源，当它在等待时，不会释放任何资源
* 不可剥夺，资源只有被那些持有它们的任务释放
* 循环等待，任务1需要等待任务2的资源，任务2需要等待任务3的资源，任务n需要等待任务1的资源，这样就出现了循环等待

如何避免：忽略、监测、预防、规避

**活锁**：任务1对资源1加锁，任务2对资源2加锁，当它们无法访问所需资源时，就会释放自己的资源并重新开始循环

资源不足：公平锁
